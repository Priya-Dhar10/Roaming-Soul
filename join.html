<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Join Tour • Roaming Soul</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body{background:#f1f5f9;font-family:system-ui,Arial,sans-serif;}
    .join-wrapper{max-width:640px;margin:90px auto 60px;padding:2.2rem 2rem 2.4rem;background:#fff;border-radius:28px;box-shadow:0 18px 46px -18px rgba(0,0,0,.28),0 8px 24px -12px rgba(0,0,0,.18);}
    h1{margin:0 0 1.2rem;font-size:1.85rem;color:#1e293b;letter-spacing:.5px;text-align:center;}
    p.lead{margin:-.4rem 0 1.6rem;font-size:.95rem;color:#475569;text-align:center;}
    form{display:flex;flex-direction:column;gap:1.1rem;}
    label span{display:block;font-size:.75rem;font-weight:600;letter-spacing:.12em;color:#334155;margin-bottom:.4rem;}
    input,textarea{width:100%;padding:.85rem 1rem;border:1px solid #cfd6dd;border-radius:14px;font:inherit;background:#f8fafc;transition:border-color .3s ease,background .3s ease,box-shadow .3s ease;}
    input:focus,textarea:focus{outline:none;border-color:#2563eb;background:#fff;box-shadow:0 0 0 3px rgba(37,99,235,.25);} 
    .two{display:grid;grid-template-columns:1fr 1fr;gap:1rem;} 
    @media(max-width:560px){.two{grid-template-columns:1fr;}}
    .note{font-size:.7rem;color:#64748b;margin-top:-.6rem;letter-spacing:.4px;}
    button[type=submit]{background:linear-gradient(135deg,#2563eb,#1d4ed8);color:#fff;border:none;padding:.95rem 1.2rem;font-weight:600;font-size:.95rem;border-radius:14px;cursor:pointer;box-shadow:0 10px 22px -10px rgba(37,99,235,.7);transition:transform .3s ease,box-shadow .4s ease;} 
    button[type=submit]:hover{transform:translateY(-3px);box-shadow:0 18px 34px -14px rgba(37,99,235,.65);} 
    .back-link{display:inline-flex;align-items:center;gap:.4rem;margin-top:1.6rem;font-size:.8rem;text-decoration:none;color:#2563eb;font-weight:600;}
    .success{display:none;padding:1rem 1.1rem;margin-top:1.2rem;border-radius:14px;background:#ecfdf5;color:#065f46;font-size:.85rem;font-weight:600;}
  </style>
</head>
<body>
  <nav class="navbar white" style="position:fixed;top:0;left:0;right:0;">
    <a href="index.html" class="logo" aria-label="Roaming Soul Home" style="text-decoration:none;color:inherit;display:flex;align-items:center;gap:.4rem;">
      <img src="essentials/Logo.png" alt="Roaming Soul Logo" />
      <span class="logo-text" style="color:#1f2933;text-shadow:none;">Roaming Soul</span>
    </a>
    <ul class="nav-menu">
      <li><a href="index.html#home" class="nav-link">Home</a></li>
      <li><a href="index.html#adventures" class="nav-link">Adventures</a></li>
    </ul>
  </nav>
  <div class="join-wrapper" id="joinCard">
    <h1 id="joinHeading">Join Tour</h1>
    <p class="lead" id="joinLead">Complete the form below to reserve your spots.</p>
    <form id="joinForm" novalidate>
      <div class="two">
        <label><span>Name</span><input type="text" id="name" required placeholder="Your full name" autocomplete="name"></label>
        <label><span>Email</span><input type="email" id="email" required placeholder="you@example.com" autocomplete="email"></label>
      </div>
      <div class="two">
        <label><span>Phone</span><input type="tel" id="phone" required placeholder="e.g. +8801XXXXXXXXX" autocomplete="tel"></label>
        <label><span>Number of people (including you)</span><input type="number" id="party" min="1" step="1" placeholder="Leave blank = 1" ></label>
      </div>
      <label><span>Additional Notes (optional)</span><textarea id="notes" rows="3" placeholder="Anything we should know?"></textarea></label>
      <p class="note">We will add the total people you enter to the live registration count when you submit.</p>
      <button type="submit">Confirm & Join</button>
      <div class="success" id="successMsg" role="status" aria-live="polite">Saved! Redirecting back to tour...</div>
    </form>
    <a class="back-link" id="backLink" href="index.html#adventures">← Back</a>
  </div>
  <script>
    (function(){
      const params=new URLSearchParams(location.search); const tour=params.get('tour');
      const heading=document.getElementById('joinHeading');
      const lead=document.getElementById('joinLead');
      if(tour){ heading.textContent='Join '+ formatTitle(tour) + ' Tour'; lead.textContent='Tell us how many people are joining the '+ formatTitle(tour) +' adventure.'; document.getElementById('backLink').href='tour.html?tour='+tour; }
      function formatTitle(k){ return k.replace(/-/g,' ').replace(/\b\w/g,ch=>ch.toUpperCase()); }
      const form=document.getElementById('joinForm'); const success=document.getElementById('successMsg');
      form.addEventListener('submit', e=>{
        e.preventDefault();
        const name=document.getElementById('name'); const email=document.getElementById('email'); const phone=document.getElementById('phone'); const party=document.getElementById('party');
        if(!name.value.trim()||!email.value.trim()||!phone.value.trim()){alert('Please fill the required fields.'); return;}
        let count=parseInt(party.value,10); if(isNaN(count)||count<1) count=1; if(count>1000) count=1000;
        try {
          const KEY='tourExtraRegistrations';
          const store=JSON.parse(localStorage.getItem(KEY)||'{}');
          store[tour||'unknown']=(store[tour||'unknown']||0)+count; // accumulate
          localStorage.setItem(KEY, JSON.stringify(store));
        }catch(err){ /* ignore storage errors */ }
        success.style.display='block';
        setTimeout(()=>{ location.href='tour.html?tour='+encodeURIComponent(tour||'coxs-bazar')+'&joined='+count; }, 900);
      });
    })();
  </script>
</body>
</html>
